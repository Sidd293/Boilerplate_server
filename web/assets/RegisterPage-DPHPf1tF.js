import{u as k,a as C,r as n,j as e,B as u,d as q,L as A}from"./index-DA43bROf.js";import{a as O,b as R,i as M,c as B,I as x,p as w}from"./otp-DPuUYL80.js";import{u as y,A as j}from"./client-LD5mSrz_.js";function F(){return y({mutationFn:O})}function E(){const m=k(s=>s.setAuth);return y({mutationFn:R,onSuccess:s=>{m(s.data.user,s.data.token)}})}function V(){const m=C(),s=F(),l=E(),[i,b]=n.useState(""),[o,v]=n.useState(""),[d,N]=n.useState(""),[r,h]=n.useState(!1),[c,S]=n.useState(!1),a=n.useMemo(()=>{const t={};return i.trim()||(t.identity="Email or phone is required."),c&&(d?M(d)||(t.code="Enter the 6-digit code."):t.code="OTP code is required.",o?B(o)||(t.password="Password must be at least 8 characters."):t.password="Password is required."),t},[i,o,d,c]),p=async()=>{if(h(!0),!i.trim())return;const t=w(i);if(t)try{await s.mutateAsync(t),S(!0)}catch{}},P=async t=>{if(t.preventDefault(),h(!0),Object.keys(a).length>0)return;const g=w(i);if(g)try{await l.mutateAsync({...g,code:d,password:o}),m("/dashboard",{replace:!0})}catch{}},f=s.error instanceof j&&s.error.message||l.error instanceof j&&l.error.message||null;return e.jsxs("form",{onSubmit:P,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"identity",className:"text-sm font-medium text-slate-200",children:"Email or phone"}),e.jsx(x,{id:"identity",type:"text",name:"identity",placeholder:"you@company.com or +1 555 000 0000",value:i,onChange:t=>b(t.target.value),className:"mt-2 bg-white/90","aria-invalid":!!(r&&a.identity)}),r&&a.identity?e.jsx("p",{className:"mt-2 text-xs text-rose-300",children:a.identity}):null]}),c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"code",className:"text-sm font-medium text-slate-200",children:"6-digit code"}),e.jsx(x,{id:"code",type:"text",name:"code",placeholder:"123456",value:d,onChange:t=>N(t.target.value),className:"mt-2 bg-white/90","aria-invalid":!!(r&&a.code)}),r&&a.code?e.jsx("p",{className:"mt-2 text-xs text-rose-300",children:a.code}):null]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-slate-200",children:"Create password"}),e.jsx(x,{id:"password",type:"password",name:"password",placeholder:"Minimum 8 characters",value:o,onChange:t=>v(t.target.value),className:"mt-2 bg-white/90","aria-invalid":!!(r&&a.password)}),r&&a.password?e.jsx("p",{className:"mt-2 text-xs text-rose-300",children:a.password}):null]})]}):e.jsx("div",{className:"text-xs text-white/60",children:"We’ll send a one-time code to verify your contact."}),f?e.jsx("div",{className:"rounded-2xl border border-rose-500/40 bg-rose-500/10 p-3 text-xs text-rose-200",children:f}):null,c?e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(u,{type:"submit",className:"w-full",disabled:l.isPending,children:l.isPending?"Creating account…":"Verify & create account"}),e.jsx(u,{type:"button",variant:"ghost",className:"w-full text-white",onClick:p,disabled:s.isPending,children:s.isPending?"Resending…":"Resend code"})]}):e.jsx(u,{type:"button",className:"w-full",onClick:p,disabled:s.isPending,children:s.isPending?"Sending…":"Send verification code"})]})}function D(){return e.jsx("div",{className:"relative z-10 min-h-screen px-6 py-10 sm:px-10",children:e.jsxs("div",{className:"mx-auto grid w-full max-w-5xl gap-10 lg:grid-cols-[1.1fr,0.9fr]",children:[e.jsxs("section",{className:"hidden flex-col justify-between lg:flex",children:[e.jsx(q,{}),e.jsx("div",{className:"mt-20",children:e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-8 shadow-2xl",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-emerald-200",children:"Launch faster"}),e.jsx("h2",{className:"mt-4 text-3xl font-semibold text-white",children:"Build your automation workspace in minutes."}),e.jsx("p",{className:"mt-4 text-sm text-white/70",children:"Centralize every action, keep an audit trail, and scale with confidence."})]})}),e.jsx("p",{className:"text-xs text-white/40",children:"© 2026 Boilerplate. All rights reserved."})]}),e.jsx("section",{className:"flex flex-col justify-center",children:e.jsxs("div",{className:"mx-auto w-full max-w-md rounded-3xl border border-white/10 bg-white/5 p-8 shadow-2xl backdrop-blur",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-emerald-200",children:"Create your account"}),e.jsx("h1",{className:"text-3xl font-semibold text-white",children:"Start a new workspace"}),e.jsx("p",{className:"text-sm text-white/60",children:"You’ll be signed in immediately after registration."})]}),e.jsx("div",{className:"mt-8",children:e.jsx(V,{})}),e.jsxs("div",{className:"mt-6 text-center text-xs text-white/60",children:["Already have an account?"," ",e.jsx(A,{to:"/login",className:"font-semibold text-emerald-200",children:"Sign in"})]})]})})]})})}export{D as default};
